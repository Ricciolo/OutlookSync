@rendermode InteractiveServer
@using OutlookSync.Domain.ValueObjects

<div class="space-y-6">
    <!-- Title handling -->
    <div class="card bg-gray-50">
        <h4 class="font-semibold text-gray-900 mb-3">Title handling</h4>
        <div class="space-y-3">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">How to handle event titles</label>
                <select @bind="_titleHandling" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue">
                    <option value="@TitleHandling.Clone">Clone (Keep original)</option>
                    <option value="@TitleHandling.Rename">Rename (Add prefix to title)</option>
                    <option value="@TitleHandling.Hide">Hide (Replace with placeholder)</option>
                </select>
            </div>
            
            @if (_titleHandling != TitleHandling.Clone)
            {
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        @(_titleHandling == TitleHandling.Rename ? "Title prefix" : "Placeholder text")
                    </label>
                    <input type="text" @bind="_customTitle" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue"
                           placeholder="@(_titleHandling == TitleHandling.Rename ? "[Work]" : "Busy")" />
                </div>
            }
        </div>
    </div>

    <!-- Content copying -->
    <div class="card bg-gray-50">
        <h4 class="font-semibold text-gray-900 mb-3">Content to copy</h4>
        <div class="space-y-2">
            <label class="flex items-center">
                <input type="checkbox" @bind="_copyDescription" class="form-checkbox h-4 w-4 text-outlook-blue" />
                <span class="ml-2 text-sm text-gray-700">Copy description</span>
            </label>
            <label class="flex items-center">
                <input type="checkbox" @bind="_copyParticipants" class="form-checkbox h-4 w-4 text-outlook-blue" />
                <span class="ml-2 text-sm text-gray-700">Copy participants</span>
            </label>
            <label class="flex items-center">
                <input type="checkbox" @bind="_copyLocation" class="form-checkbox h-4 w-4 text-outlook-blue" />
                <span class="ml-2 text-sm text-gray-700">Copy location</span>
            </label>
            <label class="flex items-center">
                <input type="checkbox" @bind="_copyAttachments" class="form-checkbox h-4 w-4 text-outlook-blue" />
                <span class="ml-2 text-sm text-gray-700">Copy attachments</span>
            </label>
        </div>
    </div>

    <!-- Event styling -->
    <div class="card bg-gray-50">
        <h4 class="font-semibold text-gray-900 mb-3">Event styling</h4>
        <div class="space-y-3">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Target category</label>
                <input type="text" @bind="_targetCategory" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue"
                       placeholder="e.g., Work, Personal" />
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Target status</label>
                <select @bind="_targetStatus" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue">
                    <option value="">Keep original</option>
                    <option value="@EventStatus.Free">Free</option>
                    <option value="@EventStatus.Busy">Busy</option>
                    <option value="@EventStatus.Tentative">Tentative</option>
                    <option value="@EventStatus.OutOfOffice">Out of Office</option>
                    <option value="@EventStatus.WorkingElsewhere">Working Elsewhere</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Reminders & privacy -->
    <div class="card bg-gray-50">
        <h4 class="font-semibold text-gray-900 mb-3">Reminders & privacy</h4>
        <div class="space-y-3">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Reminder handling</label>
                <select @bind="_reminderHandling" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue">
                    <option value="@ReminderHandling.Copy">Copy reminders</option>
                    <option value="@ReminderHandling.Disable">Disable reminders</option>
                </select>
            </div>

            <label class="flex items-center">
                <input type="checkbox" @bind="_markAsPrivate" class="form-checkbox h-4 w-4 text-outlook-blue" />
                <span class="ml-2 text-sm text-gray-700">Mark synchronized events as private</span>
            </label>
        </div>
    </div>

    <!-- Custom tags -->
    <div class="card bg-gray-50">
        <h4 class="font-semibold text-gray-900 mb-3">Custom tags</h4>
        <div class="space-y-3">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Custom tag</label>
                <input type="text" @bind="_customTag" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue"
                       placeholder="e.g., [Synced]" />
            </div>

            @if (!string.IsNullOrWhiteSpace(_customTag))
            {
                <label class="flex items-center">
                    <input type="checkbox" @bind="_customTagInTitle" class="form-checkbox h-4 w-4 text-outlook-blue" />
                    <span class="ml-2 text-sm text-gray-700">Add tag to title (otherwise add to description)</span>
                </label>
            }
        </div>
    </div>

    <!-- Sync settings -->
    <div class="card bg-gray-50">
        <h4 class="font-semibold text-gray-900 mb-3">Synchronization settings</h4>
        <div class="space-y-3">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Sync interval</label>
                <select @bind="_syncIntervalPreset" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue">
                    <option value="15">Every 15 minutes</option>
                    <option value="30">Every 30 minutes</option>
                    <option value="60">Every hour</option>
                    <option value="custom">Custom</option>
                </select>
            </div>

            @if (_syncIntervalPreset == "custom")
            {
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Custom interval (minutes)</label>
                    <input type="number" @bind="_syncIntervalMinutes" min="1" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue"
                           placeholder="60" />
                </div>
            }

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Sync days forward</label>
                <input type="number" @bind="_syncDaysForward" min="1" max="365" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue"
                       placeholder="30" />
                <p class="text-xs text-gray-500 mt-1">Number of days in the future to synchronize events (default: 30)</p>
            </div>
        </div>
    </div>

    <!-- Exclusion rules -->
    <div class="card bg-gray-50">
        <h4 class="font-semibold text-gray-900 mb-3">Exclusion rules</h4>
        <div class="space-y-3">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Exclude events by RSVP response (comma-separated)</label>
                <input type="text" @bind="_rsvpExclusion" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue"
                       placeholder="e.g., No, Maybe" />
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Exclude events by status (comma-separated)</label>
                <input type="text" @bind="_statusExclusion" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-outlook-blue"
                       placeholder="e.g., Free, Tentative" />
            </div>
        </div>
    </div>
</div>
